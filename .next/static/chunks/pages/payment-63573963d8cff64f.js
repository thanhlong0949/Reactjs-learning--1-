(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{95054:function(n,i,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return e(17138)}])},16818:function(n,i,e){"use strict";var s=e(70264),t=e(69995),d="/address/update-address",l="/address/create-new-address",o="/address/get-all-address-By",r="/address/update-address-status";i.Z={creatAddress:function(n){return(0,s._i)({url:l,method:"post",data:n})},updateAddress:function(n){return(0,s._i)({url:d,method:"put",data:n})},getAllAddress:function(){var n,i;return(0,s._i)({url:o+"/"+(null===(n=t.Z.getState())||void 0===n||null===(i=n.user)||void 0===i?void 0:i.id),method:"get"})},deleteAddress:function(n){return(0,s._i)({url:r+"/"+n,method:"put"})},getAddressByUserId:function(n){return(0,s._i)({url:"/address/get-all-address-By/".concat(n),method:"get"})}}},87881:function(n,i,e){"use strict";e.d(i,{A:function(){return d}});var s=e(85893),t=(e(67294),e(58492));function d(n){var i=n.listBreakcrum;return(0,s.jsx)("div",{children:(0,s.jsx)(t.Z,{children:i.map((function(n,i){return(0,s.jsx)(t.Z.Item,{children:n},i)}))})})}},17138:function(n,i,e){"use strict";e.r(i),e.d(i,{default:function(){return O}});var s=e(85893),t=e(67294),d=(e(25873),e(47359)),l=e(80993),o=e(24016),r=e(83134),a=e(14538),c=e(71577),h=e(86871),u=e(63922),v=e(69518),x=e(32808),j=e(87547),m=e(71255),p=e(80638),g=e(89739),f=e(73711),N=e(65723),y=e(65462),T=e(45742),Z=e(11163),w=e(87881),b=e(88767),A=e(96231),I=e(79701),S=e(9473),k=e(16818),_=e(33461),C=o.Z.TextArea;function O(){var n,i=(0,Z.useRouter)(),e=i.query.keyPage,o=(0,t.useState)(),O=o[0],V=o[1],E=(0,S.v9)((function(n){return n.user})),z=(0,t.useState)(1),B=z[0],M=z[1],R=(0,t.useState)(!1),P=R[0],q=R[1],U=(0,t.useState)([]),Y=U[0],G=U[1],H=(0,t.useState)(),F=H[0],D=H[1],X=(0,t.useState)(),J=X[0],K=X[1],L=function(){q(!1)};(0,t.useEffect)((function(){i.query.postId&&A.Z.getBookDetail(i.query.postId).then((function(n){K(null===n||void 0===n?void 0:n[0])}))}),[i.query]),(0,t.useEffect)((function(){(null===E||void 0===E?void 0:E.id)&&k.Z.getAddressByUserId(null===E||void 0===E?void 0:E.id).then((function(n){var i,e,s,t;G(n),D("".concat(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.street,", ").concat(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.ward,", ").concat(null===n||void 0===n||null===(s=n[0])||void 0===s?void 0:s.district,", ").concat(null===n||void 0===n||null===(t=n[0])||void 0===t?void 0:t.city))}))}),[]);var $=(0,b.useMutation)(A.Z.createNewOrder),Q=(0,b.useMutation)(A.Z.createNewOrderMoMO),W=function(n){M(n.target.value);var i=null===Y||void 0===Y?void 0:Y.filter((function(i){return(null===i||void 0===i?void 0:i.id)===n.target.value}));i&&(null===i||void 0===i||i.map((function(n){D("".concat(null===n||void 0===n?void 0:n.street,", ").concat(null===n||void 0===n?void 0:n.ward,", ").concat(null===n||void 0===n?void 0:n.district,", ").concat(null===n||void 0===n?void 0:n.city))})))};return(0,s.jsxs)("div",{className:"payment-container",children:[(0,s.jsx)(d.Z,{}),(0,s.jsx)(a.Z,{title:"Thay \u0111\xf4\u0309i \u0111i\u0323a chi\u0309",open:P,onOk:L,onCancel:L,okText:"\u0110\xf4\u0300ng y\u0301",cancelText:"Hu\u0309y",children:(0,s.jsx)(r.ZP.Group,{onChange:W,value:B,style:{display:"flex",flexDirection:"column"},children:(0,s.jsx)(s.Fragment,{children:null===Y||void 0===Y?void 0:Y.map((function(n){return(0,s.jsxs)(r.ZP,{value:null===n||void 0===n?void 0:n.id,children:[null===n||void 0===n?void 0:n.street,", ",null===n||void 0===n?void 0:n.ward,", ",null===n||void 0===n?void 0:n.district,", ",null===n||void 0===n?void 0:n.city]},null===n||void 0===n?void 0:n.id)}))})})}),(0,s.jsxs)("div",{className:"main",children:[(0,s.jsx)(w.A,{listBreakcrum:"Trao \u0111\u1ed5i"!==e?["Trang ch\u1ee7","T\u1ea5t c\u1ea3 s\xe1ch","B\xe1n","Thanh to\xe1n"]:["Trang ch\u1ee7","T\u1ea5t c\u1ea3 s\xe1ch","Trao \u0111\u1ed5i","Trao \u0111\u1ed5i"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Trao \u0111\u1ed5i"!==e?"Thanh to\xe1n":"Trao \u0111\u1ed5i"}),(0,s.jsxs)("div",{className:"location-given",children:[(0,s.jsxs)("div",{className:"title",children:[(0,s.jsxs)("div",{className:"location-text",children:[(0,s.jsx)(l.JO,{icon:"location",size:20,color:"#1890FF"}),(0,s.jsx)("span",{children:"\u0110\u1ecba ch\u1ec9 Ng\u01b0\u1eddi nh\u1eadn"})]}),(0,s.jsx)(c.Z,{className:"change",onClick:function(){q(!0)},children:"THAY \u0110\u1ed4I"})]}),(0,s.jsxs)("div",{className:"detail",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:null===E||void 0===E?void 0:E.name}),(0,s.jsx)("span",{style:{margin:"0 4px"},children:"|"}),(0,s.jsx)("span",{children:null===E||void 0===E?void 0:E.phoneNumber})]}),(0,s.jsx)("p",{children:F})]})]}),(0,s.jsx)("div",{className:"item-book",children:(0,s.jsxs)("div",{className:"items",children:[(0,s.jsxs)("div",{className:"items-user",children:[(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(h.C,{size:"small",icon:(0,s.jsx)(j.Z,{})}),(0,s.jsx)("div",{className:"name-user",children:(0,s.jsx)(u.Z,{size:"small",count:"".concat("Trao \u0111\u1ed5i"===e?"Ng\u01b0\u01a1\u0300i ba\u0301n:":"Ng\u01b0\u01a1\u0300i \u0111\u0103ng:"," ").concat(null===J||void 0===J?void 0:J.userName),color:"green",style:{height:"25px",display:"flex",justifyContent:"center",alignItems:"center"}})})]}),(0,s.jsxs)("div",{className:"chat",children:[(0,s.jsx)(m.Z,{style:{color:"#52C41A"}}),(0,s.jsx)("span",{children:"Chat"})]})]}),(0,s.jsxs)("div",{className:"items-book",children:[(0,s.jsx)("div",{className:"image",children:(0,s.jsx)(v.Z,{width:85,height:100,src:null===(n=null===J||void 0===J?void 0:J.bookImages[0])||void 0===n?void 0:n.url,preview:!1})}),(0,s.jsx)("div",{className:"infor-book",children:(0,s.jsxs)("div",{className:"infor-left",children:[(0,s.jsx)("div",{className:"name",children:null===J||void 0===J?void 0:J.name}),(0,s.jsx)("div",{className:"des",children:null===J||void 0===J?void 0:J.coverType}),(0,s.jsxs)("div",{className:"price",children:[(0,_.n5)(null===J||void 0===J?void 0:J.price)," VN\u0110"]})]})})]})]})}),(0,s.jsxs)("div",{className:"cost-of-payment",children:[(0,s.jsxs)("div",{className:"title",children:[(0,s.jsx)(p.Z,{style:{color:"orange",fontSize:20}}),(0,s.jsx)("span",{children:(0,s.jsxs)("b",{children:["Trao \u0111\u1ed5i"!==e?"S\u1ed1 ti\u1ec1n thanh to\xe1n":"S\u1ed1 ti\u1ec1n \u0111\u1eb7t c\u1ecdc"," "]})})]}),(0,s.jsxs)("div",{className:"detail",children:[(0,s.jsx)("h4",{children:"Trao \u0111\u1ed5i"!==e?"THANH TO\xc1N":"TRAO \u0110\u1ed4I"}),(0,s.jsxs)("b",{children:[(0,_.n5)(null===J||void 0===J?void 0:J.price)," VN\u0110"]}),(0,s.jsxs)("p",{children:["Trao \u0111\u1ed5i"!==e?"Thanh to\xe1n":"Trao \u0111\u1ed5i"," to\xe0n b\u1ed9 s\u1ed1 ti\u1ec1n"]})]}),(0,s.jsxs)("div",{className:"notifi",children:[(0,s.jsx)(g.Z,{style:{marginRight:4,marginLeft:4,color:"#26a541"}}),(0,s.jsxs)("span",{children:["S\u1ed1 ti\u1ec1n ","Trao \u0111\u1ed5i"!==e?"thanh to\xe1n":"trao \u0111\u1ed5i"," ","\u0111\u01b0\u1ee3c \u0111\u1ea3m b\u1ea3o trong 7 ng\xe0y ho\u1eb7c \u0111\u1ebfn khi b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c h\xe0ng"]})]})]}),(0,s.jsxs)("div",{className:"delivery-method",children:[(0,s.jsxs)("div",{className:"title",children:[(0,s.jsx)(f.Z,{style:{color:"orange"}}),(0,s.jsx)("span",{children:(0,s.jsx)("b",{children:"Ph\u01b0\u01a1ng th\u1ee9c Giao h\xe0ng"})})]}),(0,s.jsxs)("div",{className:"detail",children:[(0,s.jsx)(N.Z,{style:{color:"orange",marginRight:5}}),(0,s.jsx)("span",{children:"T\u1ef1 tho\u1ea3 thu\u1eadn ph\xed giao h\xe0ng"})]})]}),(0,s.jsxs)("div",{className:"payment-method",children:[(0,s.jsxs)("div",{className:"title",children:[(0,s.jsx)(y.Z,{style:{color:"orange",fontSize:20}}),(0,s.jsx)("span",{children:(0,s.jsx)("b",{children:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"})})]}),(0,s.jsx)(x.Z.Group,{style:{marginTop:"10px"},options:["V\xcd MOMO","V\xed C\u1ee7a T\xf4i"],onChange:function(n){V(n)}})]}),(0,s.jsxs)("div",{className:"payment-accept",children:[(0,s.jsx)("span",{className:"row1",children:(0,s.jsx)("b",{children:"Th\xf4ng tin Thanh to\xe1n"})}),(0,s.jsxs)("div",{className:"row2",children:[(0,s.jsx)("div",{children:"S\u1ed1 ti\u1ec1n"}),(0,s.jsxs)("div",{children:[(0,_.n5)(null===J||void 0===J?void 0:J.price)," VN\u0110"]})]}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:"............................................................................................................................................................................................................................................................................................................................................................"}),(0,s.jsxs)("div",{className:"row3",children:[(0,s.jsx)("div",{className:"title",children:"T\u1ed5ng thanh to\xe1n"}),(0,s.jsx)("div",{className:"detail",children:(0,s.jsxs)("b",{children:[(0,_.n5)(null===J||void 0===J?void 0:J.price)," VN\u0110"]})})]}),(0,s.jsxs)("div",{className:"row4",children:[(0,s.jsxs)("div",{className:"title",children:[(0,s.jsx)(T.Z,{style:{fontSize:19,marginRight:5}}),(0,s.jsx)("span",{children:(0,s.jsx)("b",{style:{fontSize:15},children:"Ghi ch\xfa"})})]}),(0,s.jsx)(C,{placeholder:"Nh\u1eadp ghi ch\xfa cho ng\u01b0\u1eddi b\xe1n",autoSize:{minRows:3,maxRows:5}})]}),(0,s.jsx)("div",{className:"button",children:(0,s.jsxs)(c.Z,{type:"primary",onClick:function(){O?1===O.length?"V\xed C\u1ee7a T\xf4i"===(null===O||void 0===O?void 0:O[0])?$.mutate({postId:i.query.postId,userId:null===E||void 0===E?void 0:E.id,paymentMethod:"VI\u0301 CU\u0309A T\xd4I",note:"string",amount:0,shipAddress:F},{onSuccess:function(n){n?((0,I.$h)("Th\xe0nh c\xf4ng!"),i.replace("/")):(0,I.YZ)("\u0110\u01a1n h\xe0ng \u0111\xe3 t\u1ed3n t\u1ea1i!")},onError:function(){(0,I.YZ)("Kh\xf4ng \u0111\u1ee7 ti\u1ec1n trong v\xed, vui l\xf2ng th\u1eed l\u1ea1i!")}}):Q.mutate({postId:i.query.postId,userId:null===E||void 0===E?void 0:E.id,paymentMethod:"",note:"string",successUrl:"string",failUrl:"string",shipAddress:""},{onSuccess:function(n){window.open(n.body.payUrl)},onError:function(){(0,I.YZ)("\u0110a\u0303 co\u0301 l\xf4\u0303i xa\u0309y ra, vui l\xf2ng th\u1eed l\u1ea1i!")}}):(0,I.YZ)("Vui lo\u0300ng chi\u0309 cho\u0323n 1 ph\u01b0\u01a1ng th\u01b0\u0301c thanh toa\u0301n!"):(0,I.YZ)("Vui lo\u0300ng cho\u0323n ph\u01b0\u01a1ng th\u01b0\u0301c thanh toa\u0301n!")},children:[" ","Trao \u0111\u1ed5i"!==e?"\u0110\u1eb6T H\xc0NG":"TRAO \u0110\u1ed4I"," "]})})]})]})]})]})}},25873:function(){}},function(n){n.O(0,[350,774,888,179],(function(){return i=95054,n(n.s=i);var i}));var i=n.O();_N_E=i}]);